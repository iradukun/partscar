(this["webpackJsonpclient-carparts"]=this["webpackJsonpclient-carparts"]||[]).push([[0],{33:function(e,t,a){e.exports=a.p+"static/media/menu.b3f49afd.svg"},34:function(e,t,a){e.exports=a.p+"static/media/close.2c5552a1.svg"},35:function(e,t){e.exports="data:image/png;base64,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"},36:function(e,t,a){e.exports=a.p+"static/media/logo.ac28aab9.png"},43:function(e,t,a){e.exports=a(77)},48:function(e,t,a){},72:function(e,t,a){},77:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(20),l=a.n(c),o=(a(48),a(5)),u=a(2),i=a.n(u),s=a(4),m=a(1),d=a(3),p=a.n(d);var b=function(){var e=Object(n.useState)([]),t=Object(m.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(!1),l=Object(m.a)(c,2),o=l[0],u=l[1],d=Object(n.useState)(""),b=Object(m.a)(d,2),f=b[0],E=b[1],h=Object(n.useState)(""),v=Object(m.a)(h,2),g=v[0],O=v[1],j=Object(n.useState)(""),y=Object(m.a)(j,2),x=y[0],w=y[1],k=Object(n.useState)(1),A=Object(m.a)(k,2),C=A[0],N=A[1],P=Object(n.useState)(0),S=Object(m.a)(P,2),I=S[0],F=S[1];return Object(n.useEffect)((function(){(function(){var e=Object(s.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("/api/products?limit=".concat(9*C,"&").concat(f,"&").concat(g,"&title[regex]=").concat(x));case 2:t=e.sent,r(t.data.products),F(t.data.result);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[o,f,g,x,C]),{products:[a,r],callback:[o,u],category:[f,E],sort:[g,O],search:[x,w],page:[C,N],result:[I,F]}},f=a(7),E=a(13);var h=function(e){var t=Object(n.useState)(!1),a=Object(m.a)(t,2),r=a[0],c=a[1],l=Object(n.useState)(!1),o=Object(m.a)(l,2),u=o[0],d=o[1],b=Object(n.useState)([]),h=Object(m.a)(b,2),v=h[0],g=h[1],O=Object(n.useState)([]),j=Object(m.a)(O,2),y=j[0],x=j[1];Object(n.useEffect)((function(){e&&function(){var t=Object(s.a)(i.a.mark((function t(){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p.a.get("/user/infor",{headers:{Authorization:e}});case 3:a=t.sent,c(!0),1===a.data.role?d(!0):d(!1),g(a.data.cart),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),alert(t.t0.response.data.msg);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}()()}),[e]);var w=function(){var t=Object(s.a)(i.a.mark((function t(a){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return",alert("Please login to continue buying"));case 2:if(!v.every((function(e){return e._id!==a._id}))){t.next=9;break}return g([].concat(Object(E.a)(v),[Object(f.a)(Object(f.a)({},a),{},{quantity:1})])),t.next=7,p.a.patch("/user/addcart",{cart:[].concat(Object(E.a)(v),[Object(f.a)(Object(f.a)({},a),{},{quantity:1})])},{headers:{Authorization:e}});case 7:t.next=10;break;case 9:alert("This product has been added to cart.");case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return{isLogged:[r,c],isAdmin:[u,d],cart:[v,g],addCart:w,history:[y,x]}};var v=function(){var e=Object(n.useState)([]),t=Object(m.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(!1),l=Object(m.a)(c,2),o=l[0],u=l[1];return Object(n.useEffect)((function(){(function(){var e=Object(s.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("/api/category");case 2:t=e.sent,r(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[o]),{categories:[a,r],callback:[o,u]}},g=Object(n.createContext)(),O=function(e){var t=e.children,a=Object(n.useState)(!1),c=Object(m.a)(a,2),l=c[0],o=c[1];Object(n.useEffect)((function(){if(localStorage.getItem("firstLogin")){var e=function(){var t=Object(s.a)(i.a.mark((function t(){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.get("/user/refresh_token");case 2:a=t.sent,o(a.data.accesstoken),setTimeout((function(){e()}),6e5);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();e()}}),[]);var u={token:[l,o],productsAPI:b(),userAPI:h(l),categoriesAPI:v()};return r.a.createElement(g.Provider,{value:u},t)},j=a(33),y=a.n(j),x=a(34),w=a.n(x),k=a(35),A=a.n(k),C=a(36),N=a.n(C);var P=function(){var e=Object(n.useContext)(g),t=Object(m.a)(e.userAPI.isLogged,1)[0],a=Object(m.a)(e.userAPI.isAdmin,1)[0],c=Object(m.a)(e.userAPI.cart,1)[0],l=Object(n.useState)(!1),u=Object(m.a)(l,2),d=u[0],b=u[1],f=function(){var e=Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("/user/logout");case 2:localStorage.removeItem("firstLogin"),window.location.href="/";case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E={left:d?0:"-100%"};return r.a.createElement("header",null,r.a.createElement("div",{className:"menu",onClick:function(){return b(!d)}},r.a.createElement("img",{src:y.a,alt:"",width:"30"})),r.a.createElement("div",{className:"logo"},r.a.createElement("div",{className:"logo-png"},r.a.createElement(o.b,{to:"/"},r.a.createElement("img",{src:N.a,alt:"",width:"350"})))),r.a.createElement("ul",{style:E},r.a.createElement("li",null,r.a.createElement(o.b,{to:"/"},a?"Products":"Shop")),a&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,r.a.createElement(o.b,{to:"/create_product"},"Create Product")),r.a.createElement("li",null,r.a.createElement(o.b,{to:"/category"},"Categories"))),t?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,r.a.createElement(o.b,{to:"/history"},"History")),r.a.createElement("li",null,r.a.createElement(o.b,{to:"/",onClick:f},"Logout"))):r.a.createElement("li",null,r.a.createElement(o.b,{to:"/login"},"Login \u2725 Register")),r.a.createElement("li",{onClick:function(){return b(!d)}},r.a.createElement("img",{src:w.a,alt:"",width:"30",className:"menu"}))),a?"":r.a.createElement("div",{className:"cart-icon"},r.a.createElement("span",null,c.length),r.a.createElement(o.b,{to:"/cart"},r.a.createElement("img",{src:A.a,alt:"",width:"30"}))))},S=a(6);var I=function(e){var t=e.product,a=e.deleteProduct,c=Object(n.useContext)(g),l=Object(m.a)(c.userAPI.isAdmin,1)[0],u=c.userAPI.addCart;return r.a.createElement("div",{className:"row_btn"},l?r.a.createElement(r.a.Fragment,null,r.a.createElement(o.b,{id:"btn_buy",to:"#!",onClick:function(){return a(t._id,t.images.public_id)}},"Delete"),r.a.createElement(o.b,{id:"btn_view",to:"/edit_product/".concat(t._id)},"Edit")):r.a.createElement(r.a.Fragment,null,r.a.createElement(o.b,{id:"btn_buy",to:"#!",onClick:function(){return u(t)}},"Add to Cart"),r.a.createElement(o.b,{id:"btn_view",to:"/detail/".concat(t._id)},"View")))};var F=function(e){var t=e.product,a=e.isAdmin,n=e.deleteProduct,c=e.handleCheck;return r.a.createElement("div",{className:"product_card"},a&&r.a.createElement("input",{type:"checkbox",checked:t.checked,onChange:function(){return c(t._id)}}),r.a.createElement("img",{src:t.images.url,alt:""}),r.a.createElement("div",{className:"product_box"},r.a.createElement("h2",{title:t.title},t.title),r.a.createElement("span",null,"$",t.price),r.a.createElement("p",null,t.description)),r.a.createElement(I,{product:t,deleteProduct:n}))};a(72);var z=function(){return r.a.createElement("div",{className:"load-page"},r.a.createElement("div",{className:"loader"},r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("div",null))))))))))};var D=function(){var e=Object(n.useContext)(g),t=Object(m.a)(e.categoriesAPI.categories,1)[0],a=Object(m.a)(e.productsAPI.category,2),c=a[0],l=a[1],o=Object(m.a)(e.productsAPI.sort,2),u=o[0],i=o[1],s=Object(m.a)(e.productsAPI.search,2),d=s[0],p=s[1];return r.a.createElement("div",{className:"filter_menu"},r.a.createElement("div",{className:"row"},r.a.createElement("span",null,"Filters: "),r.a.createElement("select",{name:"category",value:c,onChange:function(e){l(e.target.value),p("")}},r.a.createElement("option",{value:""},"All Products"),t.map((function(e){return r.a.createElement("option",{value:"category="+e._id,key:e._id},e.name)})))),r.a.createElement("input",{type:"text",value:d,placeholder:"Enter your search!",onChange:function(e){return p(e.target.value.toLowerCase())}}),r.a.createElement("div",{className:"row sort"},r.a.createElement("span",null,"Sort By: "),r.a.createElement("select",{value:u,onChange:function(e){return i(e.target.value)}},r.a.createElement("option",{value:""},"Newest"),r.a.createElement("option",{value:"sort=oldest"},"Oldest"),r.a.createElement("option",{value:"sort=-sold"},"Best sales"),r.a.createElement("option",{value:"sort=-price"},"Price: Hight-Low"),r.a.createElement("option",{value:"sort=price"},"Price: Low-Hight"))))};var q=function(){var e=Object(n.useContext)(g),t=Object(m.a)(e.productsAPI.page,2),a=t[0],c=t[1],l=Object(m.a)(e.productsAPI.result,1)[0];return r.a.createElement("div",{className:"load_more"},l<9*a?"":r.a.createElement("button",{onClick:function(){return c(a+1)}},"Load more"))};var W=function(){var e=Object(n.useContext)(g),t=Object(m.a)(e.productsAPI.products,2),a=t[0],c=t[1],l=Object(m.a)(e.userAPI.isAdmin,1)[0],o=Object(m.a)(e.token,1)[0],u=Object(m.a)(e.productsAPI.callback,2),d=u[0],b=u[1],f=Object(n.useState)(!1),h=Object(m.a)(f,2),v=h[0],O=h[1],j=Object(n.useState)(!1),y=Object(m.a)(j,2),x=y[0],w=y[1],k=function(e){a.forEach((function(t){t._id===e&&(t.checked=!t.checked)})),c(Object(E.a)(a))},A=function(){var e=Object(s.a)(i.a.mark((function e(t,a){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,O(!0),n=p.a.post("/api/destroy",{public_id:a},{headers:{Authorization:o}}),r=p.a.delete("/api/products/".concat(t),{headers:{Authorization:o}}),e.next=6,n;case 6:return e.next=8,r;case 8:b(!d),O(!1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),alert(e.t0.response.data.msg);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,a){return e.apply(this,arguments)}}();return v?r.a.createElement("div",null,r.a.createElement(z,null)):r.a.createElement("div",null,r.a.createElement(D,null),l&&r.a.createElement("div",{className:"delete-all"},r.a.createElement("span",null,"Select all"),r.a.createElement("input",{type:"checkbox",checked:x,onChange:function(){a.forEach((function(e){e.checked=!x})),c(Object(E.a)(a)),w(!x)}}),r.a.createElement("button",{onClick:function(){a.forEach((function(e){e.checked&&A(e._id,e.images.public_id)}))}},"Delete ALL")),r.a.createElement("div",{className:"products"},a.map((function(e){return r.a.createElement(F,{key:e._id,product:e,isAdmin:l,deleteProduct:A,handleCheck:k})}))),r.a.createElement(q,null),0===a.length&&r.a.createElement(z,null),r.a.createElement("a",{href:"https://wa.me/25788298718",class:"whatsapp_float",target:"_blank",rel:"noopener noreferrer"},r.a.createElement("i",{class:"fa fa-whatsapp whatsapp-icon"})))};var Z=function(){var e=Object(S.g)(),t=Object(n.useContext)(g),a=Object(m.a)(t.productsAPI.products,1)[0],c=t.userAPI.addCart,l=Object(n.useState)([]),u=Object(m.a)(l,2),i=u[0],s=u[1];return Object(n.useEffect)((function(){e.id&&a.forEach((function(t){t._id===e.id&&s(t)}))}),[e.id,a]),0===i.length?null:r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"detail"},r.a.createElement("img",{src:i.images.url,alt:""}),r.a.createElement("div",{className:"box-detail"},r.a.createElement("div",{className:"row"},r.a.createElement("h2",null,i.title),r.a.createElement("h6",null,"#id: ",i.product_id)),r.a.createElement("span",null,"$ ",i.price),r.a.createElement("p",null,i.description),r.a.createElement("p",null,i.content),r.a.createElement("p",null,"Sold: ",i.sold),r.a.createElement(o.b,{to:"/cart",className:"cart",onClick:function(){return c(i)}},"Buy Now"))),r.a.createElement("div",{className:"whatsappIcon"},r.a.createElement("a",{href:"https://wa.me/25788298718",class:"whatsapp_float",target:"_blank",rel:"noopener noreferrer"},r.a.createElement("i",{class:"fa fa-whatsapp whatsapp-icon"}))),r.a.createElement("div",null,r.a.createElement("h2",null,"Related products"),r.a.createElement("div",{className:"products"},a.map((function(e){return e.category===i.category?r.a.createElement(F,{key:e._id,product:e}):null})))))},U=a(14);var _=function(){var e=Object(n.useState)({email:"",password:""}),t=Object(m.a)(e,2),a=t[0],c=t[1],l=function(e){var t=e.target,n=t.name,r=t.value;c(Object(f.a)(Object(f.a)({},a),{},Object(U.a)({},n,r)))},u=function(){var e=Object(s.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,p.a.post("/user/login",Object(f.a)({},a));case 4:localStorage.setItem("firstLogin",!0),window.location.href="/",e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),alert(e.t0.response.data.msg);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"login-page"},r.a.createElement("form",{onSubmit:u},r.a.createElement("h2",null,"Login"),r.a.createElement("input",{type:"email",name:"email",required:!0,placeholder:"Email",value:a.email,onChange:l}),r.a.createElement("input",{type:"password",name:"password",required:!0,autoComplete:"on",placeholder:"Password",value:a.password,onChange:l}),r.a.createElement("div",{className:"row"},r.a.createElement("button",{type:"submit"},"Login"),r.a.createElement(o.b,{to:"/register"},"Register"))))};var Y=function(){var e=Object(n.useState)({name:"",email:"",password:""}),t=Object(m.a)(e,2),a=t[0],c=t[1],l=function(e){var t=e.target,n=t.name,r=t.value;c(Object(f.a)(Object(f.a)({},a),{},Object(U.a)({},n,r)))},u=function(){var e=Object(s.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,p.a.post("/user/register",Object(f.a)({},a));case 4:localStorage.setItem("firstLogin",!0),window.location.href="/",e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),alert(e.t0.response.data.msg);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"login-page"},r.a.createElement("form",{onSubmit:u},r.a.createElement("h2",null,"Register"),r.a.createElement("input",{type:"text",name:"name",required:!0,placeholder:"Name",value:a.name,onChange:l}),r.a.createElement("input",{type:"email",name:"email",required:!0,placeholder:"Email",value:a.email,onChange:l}),r.a.createElement("input",{type:"password",name:"password",required:!0,autoComplete:"on",placeholder:"Password",value:a.password,onChange:l}),r.a.createElement("div",{className:"row"},r.a.createElement("button",{type:"submit"},"Register"),r.a.createElement(o.b,{to:"/login"},"Login"))))};var K=function(){var e=Object(n.useContext)(g),t=Object(m.a)(e.userAPI.history,2),a=t[0],c=t[1],l=Object(m.a)(e.userAPI.isAdmin,1)[0],u=Object(m.a)(e.token,1)[0];return Object(n.useEffect)((function(){u&&function(){var e=Object(s.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=7;break}return e.next=3,p.a.get("/api/payment",{headers:{Authorization:u}});case 3:t=e.sent,c(t.data),e.next=11;break;case 7:return e.next=9,p.a.get("/user/history",{headers:{Authorization:u}});case 9:a=e.sent,c(a.data);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[u,l,c]),r.a.createElement("div",{className:"history-page"},r.a.createElement("h2",null,"History"),r.a.createElement("h4",null,"You have ",a.length," ordered"),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Payment ID"),r.a.createElement("th",null,"Date of Purchased"),r.a.createElement("th",null))),r.a.createElement("tbody",null,a.map((function(e){return r.a.createElement("tr",{key:e._id},r.a.createElement("td",null,e.paymentID),r.a.createElement("td",null,new Date(e.createdAt).toLocaleDateString()),r.a.createElement("td",null,r.a.createElement(o.b,{to:"/history/".concat(e._id)},"View")))})))))};var L=function(){var e=Object(n.useContext)(g),t=Object(m.a)(e.userAPI.history,1)[0],a=Object(n.useState)([]),c=Object(m.a)(a,2),l=c[0],o=c[1],u=Object(S.g)();return Object(n.useEffect)((function(){u.id&&t.forEach((function(e){e._id===u.id&&o(e)}))}),[u.id,t]),0===l.length?null:r.a.createElement("div",{className:"history-page"},r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Address"),r.a.createElement("th",null,"Postal Code"),r.a.createElement("th",null,"Country Code"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,l.address.recipient_name),r.a.createElement("td",null,l.address.line1+" - "+l.address.city),r.a.createElement("td",null,l.address.postal_code),r.a.createElement("td",null,l.address.country_code)))),r.a.createElement("table",{style:{margin:"30px 0px"}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null),r.a.createElement("th",null,"Products"),r.a.createElement("th",null,"Quantity"),r.a.createElement("th",null,"Price"))),r.a.createElement("tbody",null,l.cart.map((function(e){return r.a.createElement("tr",{key:e._id},r.a.createElement("td",null,r.a.createElement("img",{src:e.images.url,alt:""})),r.a.createElement("td",null,e.title),r.a.createElement("td",null,e.quantity),r.a.createElement("td",null,"$ ",e.price*e.quantity))})))))},Q=a(38),R=a(39),B=a(42),T=a(41),H=a(40),J=a.n(H),V=function(e){Object(B.a)(a,e);var t=Object(T.a)(a);function a(){return Object(Q.a)(this,a),t.apply(this,arguments)}return Object(R.a)(a,[{key:"render",value:function(){var e=this,t=this.props.total;return r.a.createElement(J.a,{env:"sandbox",client:{sandbox:"sb-l47gjx16765510@business.example.com",production:"Ac9adx4WTOmb1mA-NgPAPgU-YaEeQYCS-4xFmxQoXMsXO8ne8frPoWdQzSxO7aPM8zJTp5V6k9FGbIcF"},currency:"USD",total:t,onError:function(e){console.log("Error!",e)},onSuccess:function(t){console.log("The payment was succeeded!",t),e.props.tranSuccess(t)},onCancel:function(e){console.log("The payment was cancelled!",e)},style:{size:"small",color:"blue",shape:"rect",label:"checkout",tagline:!1}})}}]),a}(r.a.Component);var G=function(){var e=Object(n.useContext)(g),t=Object(m.a)(e.userAPI.cart,2),a=t[0],c=t[1],l=Object(m.a)(e.token,1)[0],o=Object(n.useState)(0),u=Object(m.a)(o,2),d=u[0],b=u[1];Object(n.useEffect)((function(){!function(){var e=a.reduce((function(e,t){return e+t.price*t.quantity}),0);b(e)}()}),[a]);var f=function(){var e=Object(s.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.patch("/user/addcart",{cart:t},{headers:{Authorization:l}});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(s.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.paymentID,r=t.address,e.next=3,p.a.post("/api/payment",{cart:a,paymentID:n,address:r},{headers:{Authorization:l}});case 3:c([]),f([]),alert("You have successfully placed an order.");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return 0===a.length?r.a.createElement("h2",{style:{textAlign:"center",fontSize:"5rem"}},"Cart Empty"):r.a.createElement("div",null,a.map((function(e){return r.a.createElement("div",{className:"detail cart",key:e._id},r.a.createElement("img",{src:e.images.url,alt:""}),r.a.createElement("div",{className:"box-detail"},r.a.createElement("h2",null,e.title),r.a.createElement("h3",null,"$ ",e.price*e.quantity),r.a.createElement("p",null,e.description),r.a.createElement("p",null,e.content),r.a.createElement("div",{className:"amount"},r.a.createElement("button",{onClick:function(){return t=e._id,a.forEach((function(e){e._id===t&&(1===e.quantity?e.quantity=1:e.quantity-=1)})),c(Object(E.a)(a)),void f(a);var t}}," - "),r.a.createElement("span",null,e.quantity),r.a.createElement("button",{onClick:function(){return t=e._id,a.forEach((function(e){e._id===t&&(e.quantity+=1)})),c(Object(E.a)(a)),void f(a);var t}}," + ")),r.a.createElement("div",{className:"delete",onClick:function(){return t=e._id,void(window.confirm("Do you want to delete this product?")&&(a.forEach((function(e,n){e._id===t&&a.splice(n,1)})),c(Object(E.a)(a)),f(a)));var t}},"X")))})),r.a.createElement("div",{className:"total"},r.a.createElement("h3",null,"Total: $ ",d),r.a.createElement(V,{total:d,tranSuccess:h})),r.a.createElement("div",{className:"deal"},r.a.createElement("h3",null," lets deal")))};var M=function(){return r.a.createElement("div",null,"404 | Not Found")};var X=function(){var e=Object(n.useContext)(g),t=Object(m.a)(e.categoriesAPI.categories,1)[0],a=Object(n.useState)(""),c=Object(m.a)(a,2),l=c[0],o=c[1],u=Object(m.a)(e.token,1)[0],d=Object(m.a)(e.categoriesAPI.callback,2),b=d[0],f=d[1],E=Object(n.useState)(!1),h=Object(m.a)(E,2),v=h[0],O=h[1],j=Object(n.useState)(""),y=Object(m.a)(j,2),x=y[0],w=y[1],k=function(){var e=Object(s.a)(i.a.mark((function e(t){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!v){e.next=9;break}return e.next=5,p.a.put("/api/category/".concat(x),{name:l},{headers:{Authorization:u}});case 5:a=e.sent,alert(a.data.msg),e.next=13;break;case 9:return e.next=11,p.a.post("/api/category",{name:l},{headers:{Authorization:u}});case 11:n=e.sent,alert(n.data.msg);case 13:O(!1),o(""),f(!b),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(1),alert(e.t0.response.data.msg);case 21:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(s.a)(i.a.mark((function e(t,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:w(t),o(a),O(!0);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),C=function(){var e=Object(s.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.delete("/api/category/".concat(t),{headers:{Authorization:u}});case 3:a=e.sent,alert(a.data.msg),f(!b),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),alert(e.t0.response.data.msg);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"categories"},r.a.createElement("form",{onSubmit:k},r.a.createElement("label",{htmlFor:"category"},"Category"),r.a.createElement("input",{type:"text",name:"category",value:l,required:!0,onChange:function(e){return o(e.target.value)}}),r.a.createElement("button",{type:"submit"},v?"Update":"Create")),r.a.createElement("div",{className:"col"},t.map((function(e){return r.a.createElement("div",{className:"row",key:e._id},r.a.createElement("p",null,e.name),r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){return A(e._id,e.name)}},"Edit"),r.a.createElement("button",{onClick:function(){return C(e._id)}},"Delete")))}))))},$={product_id:"",title:"",price:0,description:"",content:"",category:"",_id:""};var ee=function(){var e=Object(n.useContext)(g),t=Object(n.useState)($),a=Object(m.a)(t,2),c=a[0],l=a[1],o=Object(m.a)(e.categoriesAPI.categories,1)[0],u=Object(n.useState)(!1),d=Object(m.a)(u,2),b=d[0],E=d[1],h=Object(n.useState)(!1),v=Object(m.a)(h,2),O=v[0],j=v[1],y=Object(m.a)(e.userAPI.isAdmin,1)[0],x=Object(m.a)(e.token,1)[0],w=Object(S.f)(),k=Object(S.g)(),A=Object(m.a)(e.productsAPI.products,1)[0],C=Object(n.useState)(!1),N=Object(m.a)(C,2),P=N[0],I=N[1],F=Object(m.a)(e.productsAPI.callback,2),D=F[0],q=F[1];Object(n.useEffect)((function(){k.id?(I(!0),A.forEach((function(e){e._id===k.id&&(l(e),E(e.images))}))):(I(!1),l($),E(!1))}),[k.id,A]);var W=function(){var e=Object(s.a)(i.a.mark((function e(t){var a,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,y){e.next=4;break}return e.abrupt("return",alert("You're not an admin"));case 4:if(a=t.target.files[0]){e.next=7;break}return e.abrupt("return",alert("File not exist."));case 7:if(!(a.size>1048576)){e.next=9;break}return e.abrupt("return",alert("Size too large!"));case 9:if("image/jpeg"===a.type||"image/png"===a.type){e.next=11;break}return e.abrupt("return",alert("File format is incorrect."));case 11:return(n=new FormData).append("file",a),j(!0),e.next=16,p.a.post("/api/upload",n,{headers:{"content-type":"multipart/form-data",Authorization:x}});case 16:r=e.sent,j(!1),E(r.data),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(1),alert(e.t0.response.data.msg);case 24:case"end":return e.stop()}}),e,null,[[1,21]])})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,y){e.next=3;break}return e.abrupt("return",alert("You're not an admin"));case 3:return j(!0),e.next=6,p.a.post("/api/destroy",{public_id:b.public_id},{headers:{Authorization:x}});case 6:j(!1),E(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),alert(e.t0.response.data.msg);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),_=function(e){var t=e.target,a=t.name,n=t.value;l(Object(f.a)(Object(f.a)({},c),{},Object(U.a)({},a,n)))},Y=function(){var e=Object(s.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,y){e.next=4;break}return e.abrupt("return",alert("You're not an admin"));case 4:if(b){e.next=6;break}return e.abrupt("return",alert("No Image Upload"));case 6:if(!P){e.next=11;break}return e.next=9,p.a.put("/api/products/".concat(c._id),Object(f.a)(Object(f.a)({},c),{},{images:b}),{headers:{Authorization:x}});case 9:e.next=13;break;case 11:return e.next=13,p.a.post("/api/products",Object(f.a)(Object(f.a)({},c),{},{images:b}),{headers:{Authorization:x}});case 13:q(!D),w.push("/"),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(1),alert(e.t0.response.data.msg);case 20:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(t){return e.apply(this,arguments)}}(),K={display:b?"block":"none"};return r.a.createElement("div",{className:"create_product"},r.a.createElement("div",{className:"upload"},r.a.createElement("input",{type:"file",name:"file",id:"file_up",onChange:W}),O?r.a.createElement("div",{id:"file_img"},r.a.createElement(z,null)):r.a.createElement("div",{id:"file_img",style:K},r.a.createElement("img",{src:b?b.url:"",alt:""}),r.a.createElement("span",{onClick:Z},"X"))),r.a.createElement("form",{onSubmit:Y},r.a.createElement("div",{className:"row"},r.a.createElement("label",{htmlFor:"product_id"},"Product ID"),r.a.createElement("input",{type:"text",name:"product_id",id:"product_id",required:!0,value:c.product_id,onChange:_,disabled:P})),r.a.createElement("div",{className:"row"},r.a.createElement("label",{htmlFor:"title"},"Title"),r.a.createElement("input",{type:"text",name:"title",id:"title",required:!0,value:c.title,onChange:_})),r.a.createElement("div",{className:"row"},r.a.createElement("label",{htmlFor:"price"},"Price"),r.a.createElement("input",{type:"number",name:"price",id:"price",required:!0,value:c.price,onChange:_})),r.a.createElement("div",{className:"row"},r.a.createElement("label",{htmlFor:"description"},"Description"),r.a.createElement("textarea",{type:"text",name:"description",id:"description",required:!0,value:c.description,rows:"5",onChange:_})),r.a.createElement("div",{className:"row"},r.a.createElement("label",{htmlFor:"content"},"Content"),r.a.createElement("textarea",{type:"text",name:"content",id:"content",required:!0,value:c.content,rows:"7",onChange:_})),r.a.createElement("div",{className:"row"},r.a.createElement("label",{htmlFor:"categories"},"Categories: "),r.a.createElement("select",{name:"category",value:c.category,onChange:_},r.a.createElement("option",{value:""},"Please select a category"),o.map((function(e){return r.a.createElement("option",{value:e._id,key:e._id},e.name)})))),r.a.createElement("button",{type:"submit"},P?"Update":"Create")))};var te=function(){var e=Object(n.useContext)(g),t=Object(m.a)(e.userAPI.isLogged,1)[0],a=Object(m.a)(e.userAPI.isAdmin,1)[0];return r.a.createElement(S.c,null,r.a.createElement(S.a,{path:"/",exact:!0,component:W}),r.a.createElement(S.a,{path:"/detail/:id",exact:!0,component:Z}),r.a.createElement(S.a,{path:"/login",exact:!0,component:t?M:_}),r.a.createElement(S.a,{path:"/register",exact:!0,component:t?M:Y}),r.a.createElement(S.a,{path:"/category",exact:!0,component:a?X:M}),r.a.createElement(S.a,{path:"/create_product",exact:!0,component:a?ee:M}),r.a.createElement(S.a,{path:"/edit_product/:id",exact:!0,component:a?ee:M}),r.a.createElement(S.a,{path:"/history",exact:!0,component:t?K:M}),r.a.createElement(S.a,{path:"/history/:id",exact:!0,component:t?L:M}),r.a.createElement(S.a,{path:"/cart",exact:!0,component:G}),r.a.createElement(S.a,{path:"*",exact:!0,component:M}))};var ae=function(){return r.a.createElement(O,null,r.a.createElement(o.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(P,null),r.a.createElement(te,null))))};l.a.render(r.a.createElement(ae,null),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.aca17052.chunk.js.map